# Быстрая сортировка: результаты

## Общая информация

Для анализа производительности использовался массив размера 10000000 чисел, равномерно распределённых на отрезке от -1000000 до 1000000.
Для уменьшения влияния случайности на результаты измерений, время усреднялось по 10 запускам.
Последовательная сортировка выполняется за 4008 миллисекунд.

## Сортировка с тремя параллельными фильтрами

| Размер блока последовательного выполнения | Время (миллисекунды) | Ускорение |
| ------------- | ------------- | ------------- | 
| 100  | 16491  | 0.24 |
| 1000  | 13071  | 0.31 |
| 10000 | 10195 | 0.39 |
| 100000 | 7340 | 0.55 |
| 1000000 | 4940 | 0.81 |
| 3000000 | 3597 | 1.11 | 

Столь высокие показатели времени обусловлены тем, что для каждого массива реализация совершает в 12 раз больше работы, чем последовательная версия 
(за счёт 3 фильтров и 4 проходов на каждый фильтр). К тому же последовательная версия выполняет сортировку без выделения дополнительной памяти, в то время как
параллельная версия тратит время на аллокацию динамической памяти.

Несмотря на то, что эта версия алгоритма имеет полилогарифмический Span, она просто не может работать быстро на 4 рабочих потоках из-за того, 
что совершает в 12 раз больше работы, чем последовательная версия.

## Сортировка с тремя последовательными фильтрами

| Размер блока последовательного выполнения | Время (миллисекунды) | Ускорение |
| ------------- | ------------- | ------------- | 
| 100  | 8022  | 0.50 |
| 1000  | 6450  | 0.62 |
| 10000 | 5193 | 0.77 |
| 100000 | 4172 | 0.96 |
| 1000000 | 3097 | 1.29 |
| 3000000 | 2984 | 1.34 | 

Эта версия имеет линейный Span, но выигрывает у версии с параллельными фильтрами за счёт того, что совершает всего в 3 раза больше работы по сравнению с 
последовательной версией. 

## Inplace сортировка с fork-join на сортировку двух половин массива

| Размер блока последовательного выполнения | Время (миллисекунды) | Ускорение |
| ------------- | ------------- | ------------- | 
| 100  | 1417  | 2.83 |
| 1000  | 1463  | 2.74 |
| 10000 | 1394 | 2.88 |
| 100000 | 1444 | 2.78 |
| 1000000 | 1516 | 2.64 |
| 3000000 | 1710 | 2.34 | 

Эта версия имеет линейный Span, и использует многоядерность системы только за счёт возможности параллельно сортировать обе половины массива после разбиения.
Несмотря на это, на малом числе рабочих потоков именно она показывает лучший результат, так как совершает столько же действий, сколько и последовательная
версия, и не выделяет динамической памяти.
